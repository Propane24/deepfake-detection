<!DOCTYPE html>
<html>
<head>
<title>Deepfake Detection Live Demo</title>

<style>
body{
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    font-family: 'Segoe UI', sans-serif;
    color:white;
    margin:0;
    text-align:center;
}

h1{
    padding-top:20px;
    font-size:32px;
}

.scanCounter{
    margin-top:10px;
    font-size:18px;
    opacity:0.8;
}

.gallery{
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:25px;
    margin:40px;
}

.card{
    position:relative;
    width:260px;
    border-radius:15px;
    overflow:hidden;
    background:#111;
    box-shadow:0 0 20px rgba(0,0,0,0.6);
    transition:0.3s;
}

.card:hover{
    transform:scale(1.03);
}

img{
    width:100%;
    display:block;
}

.overlay{
    position:absolute;
    bottom:0;
    width:100%;
    background:rgba(0,0,0,0.8);
    padding:10px;
}

.label{
    font-weight:bold;
}

.bar{
    height:6px;
    border-radius:5px;
    margin-top:6px;
    background:#333;
    overflow:hidden;
}

.fill{
    height:100%;
    width:0%;
    transition:1s;
}

.fake{
    box-shadow:0 0 15px red;
}

.real{
    box-shadow:0 0 15px #00ff88;
}

button{
    padding:12px 25px;
    font-size:16px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    background:#00c3ff;
    color:white;
}
</style>
</head>

<body>

<h1> Real-Time Deepfake Detection</h1>
<div class="scanCounter" id="counter">Scanned: 0</div>

<button onclick="scanAll()"> Scan All Images</button>

<div class="gallery">

<div class="card">
    <img src="images/Img1.jpg">
    <div class="overlay">
        <div class="label">Waiting...</div>
        <div class="bar"><div class="fill"></div></div>
    </div>
</div>

<div class="card">
    <img src="images/Img2.jpg">
    <div class="overlay">
        <div class="label">Waiting...</div>
        <div class="bar"><div class="fill"></div></div>
    </div>
</div>

<div class="card">
    <img src="images/Img3.jpg">
    <div class="overlay">
        <div class="label">Waiting...</div>
        <div class="bar"><div class="fill"></div></div>
    </div>
</div>

<div class="card">
    <img src="images/Img4.jpg">
    <div class="overlay">
        <div class="label">Waiting...</div>
        <div class="bar"><div class="fill"></div></div>
    </div>
</div>

<div class="card">
    <img src="images/Img5.jpg">
    <div class="overlay">
        <div class="label">Waiting...</div>
        <div class="bar"><div class="fill"></div></div>
    </div>
</div>

</div>

<script>

let scanned = 0;

async function analyze(card){

    const img = card.querySelector("img");
    const label = card.querySelector(".label");
    const fill = card.querySelector(".fill");

    label.innerText = "Analyzing...";
    
    const response = await fetch(img.src);
    const blob = await response.blob();

    const formData = new FormData();
    formData.append("file", blob);

    const res = await fetch("http://127.0.0.1:8000/analyze",{
        method:"POST",
        body:formData
    });

    const data = await res.json();

    const percent = Math.round(data.fake_probability * 100);

    fill.style.width = percent + "%";

    if(data.label==="FAKE"){
        fill.style.background="red";
        label.innerText="FAKE ("+percent+"%)";
        card.classList.add("fake");
    }else{
        fill.style.background="#00ff88";
        label.innerText="REAL ("+percent+"%)";
        card.classList.add("real");
    }

    scanned++;
    document.getElementById("counter").innerText = "Scanned: " + scanned;
}

function scanAll(){
    scanned = 0;
    document.getElementById("counter").innerText = "Scanned: 0";
    const cards = document.querySelectorAll(".card");
    cards.forEach(card => analyze(card));
}

</script>

</body>
</html>
